var Sketch=function(){function o(d){d=p(d||{},j);var f="sketch-"+a++,g=document.createElement("canvas");switch(d.type){case c:try{e=g.getContext("webgl",d)}catch(h){}try{e=e||g.getContext("experimental-webgl",d)}catch(h){}if(!e)throw"WebGL not supported";break;case b:try{e=g.getContext("2d",d)}catch(h){}if(!e)throw"Canvas not supported";break;default:g=e=document.createElement("div")}return e.canvas=g,g.className="sketch",g.id=f,d.container.appendChild(g),p(self,k),p(e,d),p(e,l),r(),t(),i.push(e),e.autostart&&setTimeout(e.start,0),e}function p(a,b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c]);return a}function q(a){function c(a,b){return function(){a.call(b,arguments)}}var b={};for(var d in a)b[d]="function"==typeof a[d]?c(a[d],a):a[d];return b}function r(){function c(b){return a[b]||String.fromCharCode(b)}function d(a){e.mouse.ox=e.mouse.x,e.mouse.oy=e.mouse.y,e.mouse.x=a.x,e.mouse.y=a.y,e.mouse.dx=e.mouse.x-e.mouse.ox,e.mouse.dy=e.mouse.y-e.mouse.oy}function g(a){var b,c=q(a);c.original=a;for(var d=e.canvas,g=0,h=0;d;d=d.offsetParent)g+=d.offsetLeft,h+=d.offsetTop;if(c.touches&&c.touches.length)for(var j,i=c.touches.length-1;i>=0;i--)j=c.touches[i],j.x=j.pageX-g,j.y=j.pageY-h,b=f[i]||j,j.dx=j.x-b.x,j.dy=j.y-b.x,j.ox=b.x,j.oy=b.y,f[i]=q(j);else c.x=c.pageX-g,c.y=c.pageY-h,b=f.mouse||c,c.dx=c.x-b.x,c.dy=c.y-b.y,c.ox=b.x,c.oy=b.y,f.mouse=c;return c}function h(a){a.preventDefault(),a=g(a),e.touches=a.touches,d(e.touches[0]),e.touchstart&&e.touchstart(a),e.mousedown&&e.mousedown(a)}function i(a){a=g(a),e.touches=a.touches,d(e.touches[0]),e.touchmove&&e.touchmove(a),e.mousemove&&e.mousemove(a)}function j(a){if(a=g(a),a.touches.length)for(var b in f)a.touches[b]||delete f[b];else f={};e.touchend&&e.touchend(a),e.mouseup&&e.mouseup(a)}function k(a){a=g(a),e.mouseover&&e.mouseover(a)}function o(a){a=g(a),e.dragging||(n(e.canvas,"mousemove",p),n(e.canvas,"mouseup",s),m(document,"mousemove",p),m(document,"mouseup",s),e.dragging=!0),e.touches=[a],e.touchstart&&e.touchstart(a),e.mousedown&&e.mousedown(a)}function p(a){a=g(a),d(a),e.touches=[a],e.touchmove&&e.touchmove(a),e.mousemove&&e.mousemove(a)}function r(a){a=g(a),e.mouseout&&e.mouseout(a)}function s(a){a=g(a),e.dragging&&(n(document,"mousemove",p),n(document,"mouseup",s),m(e.canvas,"mousemove",p),m(e.canvas,"mouseup",s),e.dragging=!1),delete f.mouse,e.touchend&&e.touchend(a),e.mouseup&&e.mouseup(a)}function u(a){a=g(a),e.click&&e.click(a)}function v(a){e.keys[c(a.keyCode)]=!0,e.keys[a.keyCode]=!0,e.keydown&&e.keydown(a)}function w(a){e.keys[c(a.keyCode)]=!1,e.keys[a.keyCode]=!1,e.keyup&&e.keyup(a)}var a={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"};for(var b in a)l.keys[a[b]]=!1;var f={};m(e.canvas,"touchstart",h),m(e.canvas,"touchmove",i),m(e.canvas,"touchend",j),m(e.canvas,"mouseover",k),m(e.canvas,"mousedown",o),m(e.canvas,"mousemove",p),m(e.canvas,"mouseout",r),m(e.canvas,"mouseup",s),m(e.canvas,"click",u),m(document,"keydown",v),m(document,"keyup",w),m(window,"resize",t)}function s(){if(!f){var a=Date.now();e.dt=a-e.now,e.millis+=e.dt,e.now=a,e.update&&e.update(e.dt),e.autoclear&&e.clear(),e.draw&&e.draw(e)}f=++f%e.interval,g=requestAnimationFrame(s)}function t(){var b=e.type===d?e.style:e.canvas;e.fullscreen?(e.height=b.height=window.innerHeight,e.width=b.width=window.innerWidth):(b.height=e.height,b.width=e.width),e.resize&&e.resize()}var e,a=0,b="canvas",c="web-gl",d="dom",f=0,g=-1,h={},i=[],j={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,container:document.body,interval:1,type:b},k={PI:Math.PI,TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,QUARTER_PI:Math.PI/4,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,random:function(a,b){return a&&"number"==typeof a.length&&a.length?a[Math.floor(Math.random()*a.length)]:("number"!=typeof b&&(b=a||1,a=0),a+Math.random()*(b-a))}},l={millis:0,now:0/0,dt:0/0,keys:{},mouse:{x:0,y:0,ox:0,oy:0,dx:0,dy:0},touches:[],initialized:!1,dragging:!1,running:!1,start:function(){e.running||(e.setup&&!e.initialized&&(e.autopause&&(m(window,"focus",e.start),m(window,"blur",e.stop)),e.setup()),e.initialized=!0,e.running=!0,e.now=Date.now(),s())},stop:function(){cancelAnimationFrame(g),e.running=!1},toggle:function(){(e.running?e.stop:e.start)()},clear:function(){e.canvas&&(e.canvas.width=e.canvas.width)},destroy:function(){var a,b,c,d,f,g;i.splice(i.indexOf(e),1),e.stop();for(b in h){for(c=h[b],f=0,g=c.length;g>f;f++)a=c[f],n(a.el,b,a.fn);delete h[b]}e.container.removeChild(e.canvas);for(d in e)e.hasOwnProperty(d)&&delete e[d]}},m=function(){function a(a,b,c){h[b]||(h[b]=[]),h[b].push({el:a,fn:c})}return window.addEventListener?function(b,c,d){b.addEventListener(c,d,!1),a(b,c,d)}:window.attachEvent?function(b,c,d){b.attachEvent("on"+c,d),a(b,c,d)}:function(b,c,d){b["on"+c]=d,a(b,c,d)}}(),n=function(){function a(a,b,c){if(h[b])for(var d,e=h[b].length-1;e>=0;e--)d=h[b][e],d.el===a&&d.fn===c&&h[b].splice(e,1)}return window.removeEventListener?function(b,c,d){b.removeEventListener(c,d,!1),a(b,c,d)}:window.detachEvent?function(b,c,d){b.detachEvent("on"+c,d),a(b,c,d)}:(el["on"+ev]=null,a(el,ev,fn),void 0)}();return{CANVAS:b,WEB_GL:c,DOM:d,instances:i,create:o}}();Date.now||(Date.now=function(){return+new Date}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;b.length>c&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();